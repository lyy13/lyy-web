# 目标 #

小纸条界面


将本来用后台画出来的界面用前端写出来


本来在上周结束时就应该完成的项目，但因为很多细节问题一直没完成。在上周结束时，我也以为是完成了大概了。

但是由于对微信接口的不掌握，对前端界面缺少调试，以及需求流程不明确，所以一直耽误着。

1. 当接口接收的数据为json格式时，需要在head加上Content-Type: application/json告诉服务端请求的参数是json格式，在写程序前，一定要知道需求以及走一遍流程；对于我的记忆力与断片式实现形式来说，自己最好写下来。
2. 周一是在弄部分样式，像弹窗及背景等等，还有音乐暂停播放的功能，这里真是一个大坑，为什么直接用audio组件没有play等方法播放暂停，只有control这个属性决定是否有控制按钮。。。但是用Taro.createInnerAudioContext()就有这个方法，还有就是将之前写的一些假数据用接上的接口对上数据。
3. 周二在研究接口；一开始微信分享那个接口没对上，但因为一直都是没有分享按钮，所以一直没有实操确认是否对上，后台用了微信开发者工具，以及关闭防火墙后，终于可以手机测试。
	
- 一开始没有发现state异步存储问题（这个一定要牢牢记住），一直分享失败，后来将分享接口写在请求列表参数里就行了。

- 后来增加一个内容就是在游客发小纸条登录后，将已写入信息发送出去，在成功后就删除localstorage里内容

- 加一个中转界面。

4. 今天发现了一个bug，就是重复发送同一条消息时，会失败，并多一条自己的发的纸条。需要加一个参数判断是否重复发送。逻辑很简单，就像1+1，但我就不知道1应该去哪里拿，钻了牛角尖，说不通，直到看到返回为ok时，才幡然醒悟，返回成功时存前一个值，就可以了。


- 本来是和后台对接测试的，但是路由问题需要更改，就耽误了一段时间；还有最后在登录界面跳转时，改为跳转到中转界面。

- 期间写了一部分前端规范文档。

这个项目，最大的问题就是微信接口方面，对这方面的知识好歹比之前掌握多一些。还有就是现在没有之前那么喜欢写样式了，一些问题连搜索关键词都搞错。觉得后台前端那个很好玩。